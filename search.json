[{"title":"Python sshæ¡¥è¿mysql","url":"/2022/04/21/111/","content":"Code only, Mark for the next usage.Requires:\npymysql\nsshtunnel\n\nMySql Class:\nimport pymysqlfrom sshtunnel import SSHTunnelForwarderclass MySql:    def __init__(self):        self.server = SSHTunnelForwarder(            ssh_address_or_host=(&#x27;SSH IP-ADDRESS&#x27;, 22),  # æŒ‡å®šsshç™»å½•çš„è·³è½¬æœºçš„address            ssh_username=&#x27;root&#x27;,  # è·³è½¬æœºçš„ç”¨æˆ·            ssh_password=&#x27;PWD&#x27;,  # è·³è½¬æœºçš„å¯†ç             remote_bind_address=(&#x27;DB HOST&#x27;,                                 3306))        self.server.start()        self.conn = pymysql.connect(host=&#x27;127.0.0.1&#x27;, # ç”¨äº†sshæ¡¥è¿ï¼Œè¿™é‡Œå›ºå®š                                    port=self.server.local_bind_port,                                    user=&#x27;root&#x27;,                                    password=&#x27;PWD&#x27;,                                    db=&#x27;DB-NAME&#x27;,                                    charset=&#x27;utf8&#x27;)        self.cursor = self.conn.cursor()    def insert(self, sql):        try:            self.cursor.execute(sql)            self.conn.commit()        except Exception as e:            print(e)            self.conn.rollback()    def close(self):        self.server.stop()        self.cursor.close()        self.conn.close()    def select(self, sql):        try:            self.cursor.execute(sql)            return self.cursor.fetchall()        except Exception as e:            print(e)            return None    def update(self, sql):        try:            self.cursor.execute(sql)            self.conn.commit()        except Exception as e:            print(e)            self.conn.rollback()    def delete(self, sql):        try:            self.cursor.execute(sql)            self.conn.commit()        except Exception as e:            print(e)            self.conn.rollback()    def select_one(self, sql):        try:            self.cursor.execute(sql)            return self.cursor.fetchone()        except Exception as e:            print(e)            return None    def select_many(self, sql):        try:            self.cursor.execute(sql)            return self.cursor.fetchmany()        except Exception as e:            print(e)            return None    def select_all(self, sql):        try:            self.cursor.execute(sql)            return self.cursor.fetchall()        except Exception as e:            print(e)            return None    def select_count(self, sql):        try:            self.cursor.execute(sql)            return self.cursor.fetchone()[0]        except Exception as e:            print(e)            return None    def insert_many(self, sql, values):        try:            self.cursor.executemany(sql, values)            self.conn.commit()        except Exception as e:            self.conn.rollback()            raise e\n\n","categories":["Python"],"tags":["Python","Mysql","pymysql","SQL"]},{"title":"Being or Been","url":"/2022/04/02/Being-or-Been/","content":"Being æ˜¯ BE åŠ¨è¯çš„ç°åœ¨åˆ†è¯ï¼Œè€Œ Been æ˜¯ BE åŠ¨è¯çš„è¿‡å»åˆ†è¯ã€‚\nbeen ä¸€å®šç”¨åœ¨ have (åŠå…¶ä»– have å½¢å¼ï¼Œå¦‚ has, had, will have ç­‰) ä¹‹åï¼Œè€Œ being ç»ä¸ä¼šç”¨åœ¨ have ä¹‹åã€‚ Being æ˜¯ç”¨åœ¨ BE åŠ¨è¯ä¹‹å (åŠå…¶ä»– be å½¢å¼ï¼Œå¦‚ are, were, is, was ç­‰) \nExample:\nShe is being very clever today. (Correct)                                              å¥¹ä»Šå¤©è¡¨ç°çš„å¾ˆèªæ˜\nShe has being very clever today. (Incorrect)\nThey have been busy.  (Correct)                                                           ä»–ä»¬ä¸€ç›´å¾ˆå¿™\nThey are been busy. (Incorrect)\nSophia has being working at that company.  (Incorrect) ï¼ being ä¸èƒ½åœ¨ have æˆ– has åã€‚\n\nBeing å¯ç”¨ä½œåè¯Example:\nA human being (äººï¼Œäººç±»)\nA strange being stepped out of the spaceship. (ä¸€ä¸ªå¥‡æ€ªçš„äººèµ°å‡ºäº†å¤ªç©ºèˆ¹)\n\nBeing ä¹Ÿå¯ç”¨ä½œåŠ¨åè¯ã€‚Example:\nDo you like being so careless? (ä½ å–œæ¬¢è¿™ä¹ˆç²—å¿ƒå—ï¼Ÿ)\nThe accident was caused by his being so clumsy. (å› ä¸ºä»–çš„ä¸ç†Ÿç»ƒæ‰å¯¼è‡´äº†è¿™èµ·äº‹æ•…)\nI live in terror of not being misunderstood. (æˆ‘æ´»åœ¨ä¸è¢«è¯¯è§£çš„ææƒ§ä¸­)ã€‚å‡ºè‡ªè‹±å›½å¤§æ–‡è±ªç‹å°”å¾· (Oscar Wilde)\n\nä¸€èˆ¬è€Œè¨€ï¼Œç°åœ¨åˆ†è¯å’Œè¿‡å»åˆ†è¯éƒ½å¯ä»¥å½“å½¢å®¹è¯æ¥ä¿®é¥°åè¯ï¼Œä½† being å’Œ been ä¸è¡ŒExample:\nBroken vase ç ´ç¢çš„èŠ±ç“¶ (Correct)\nDeleted file åˆ é™¤çš„æ–‡ä»¶ (Correct)\nJogging girl è·‘æ­¥çš„å°‘å¥³ (æ­£)\nThe been car  (Incorrect,meaningless)\nThe being flower  (Incorrect,meaningless)\n\n","categories":["English"],"tags":["English"]},{"title":"ES6 å¾ªç¯","url":"/2021/10/23/ES6-%E5%BE%AA%E7%8E%AF/","content":"// å¾ªç¯ä¸‹æ ‡æˆ–è€…keyï¼ˆfor-inï¼‰  // do not actually do thisfor (var index in myArray) &#123;      console.log(myArray[index]);  &#125;    // å¾ªç¯valueï¼ˆfor-ofï¼‰  for (var value of myArray) &#123;    console.log(value);  &#125;    // ç”šè‡³ç›´æ¥å¾ªç¯keyå’Œvalueï¼Œno problem  for (var [key, value] of phoneBookMap) &#123;    console.log(key + &quot;&#x27;s phone number is: &quot; + value);  &#125;  \n\n","categories":["Javascript"],"tags":["ES6"]},{"title":"Easy forget words in Mar 2022","url":"/2022/03/22/Easy-forget-words-in-Mar-2022/","content":"Nouns about academic which easy to forget\narchaeology: è€ƒå¤å­¦\narchitecture: å»ºç­‘å­¦&#x2F; ç»“æ„ï¼Œä½“ç³»ç»“æ„\nagriculture: å†œå­¦\nWords with silent â€˜wâ€™\nwrestle: æ‘”è·¤&#x2F;æ‰“æ¶\nwrinkle: è¤¶çš±**&#x2F;**çš±çº¹\n","categories":["English"]},{"title":"Github Copilot ä½¿ç”¨ä½“éªŒ","url":"/2022/04/21/Github-Copilot-%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C/","content":"\né‡å¤ï¼Œç¹ççš„äº‹æƒ…äº¤ç»™æœºå™¨ï¼ŒæŠŠæ—¶é—´èŠ±åœ¨è¿™äº›äº‹æƒ…ä¸Šæ²¡æœ‰ä»»ä½•æ„ä¹‰\n\nCopilot æ˜¯ä»€ä¹ˆCopilot (https://copilot.github.com/open in new window) æ˜¯ç”± Github æä¾›çš„AIç¼–ç è¾…åŠ©å·¥å…·ï¼Œå®ƒå¯ä»¥åœ¨ç¼–ç è¿‡ç¨‹ä¸­æä¾›åŸºäº AI å­¦ä¹ çš„ç¼–ç å»ºè®®ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œåªéœ€è¦æœ‰æ³¨é‡Šæˆ–è€…å‡½æ•°åç§°ï¼ŒCopilotå°±å¯ä»¥å®ä¾‹å®Œæ•´çš„ä»£ç ã€‚\nç›®å‰ Copilot è¿˜æ²¡æœ‰å…¨é‡å¼€æ”¾ï¼Œéœ€è¦ç”³è¯·å¼€é€šæƒé™ã€‚è®¿é—®å®ƒçš„å®˜æ–¹ç½‘ç«™https://copilot.github.com/open in new windowï¼Œç‚¹å‡»â€œSign upâ€œæŒ‰é’®å³å¯ç”³è¯·å¼€é€šã€‚å½“è·å¾—å¼€é€šæƒé™åï¼Œå°±å¯ä»¥åœ¨ Github ä¸Šä½¿ç”¨ Copilotã€‚\n\nå®‰è£…æ’ä»¶åœ¨Vscodeæ’ä»¶èœå•ä¸­ï¼Œæœç´¢Copilotï¼Œå®‰è£…å³å¯\næ’ä»¶å¸‚åœºçš„åœ°å€ä¸ºhttps://marketplace.visualstudio.com/items?itemName=GitHub.copilot\n\nå®‰è£…åæ’ä»¶ä¼šæç¤ºè¦æ±‚ç™»å½• [æ‹¥æœ‰ä½“éªŒèµ„æ ¼çš„] Github è´¦æˆ·,æ ¹æ®æç¤ºç™»å½•å³å¯\nèµ„æ ¼å»å®˜ç½‘([https://copilot.github.com)ç”³è¯·ï¼Œå¤§æ¦‚éœ€è¦æ’é˜Ÿä¸€ä¸ªæœˆçš„æ—¶é—´\nä½¿ç”¨æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œå½“ Copilot ç»™å‡ºå»ºè®®æ—¶ï¼Œä¼šåœ¨å…‰æ ‡ä½ç½®çš„åæ–¹å‡ºç°å»ºè®®çš„ä»£ç ï¼Œå¹¶ç°è‰²å­—æ˜¾ç¤ºã€‚å¦‚æœä¸å¸Œæœ›ä½¿ç”¨æç¤ºï¼Œåˆ™ç»§ç»­è¾“å…¥ä»£ç å³å¯ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨æç¤ºçš„ä»£ç ï¼ŒæŒ‰ä¸‹ Tab é”®å³å¯ã€‚\n\nåœ¨ VSCode ä¸­ï¼ŒCopilot æœ‰ä¸€ä¸ªå›¾æ ‡ï¼Œéœ€è¦ç¡®è®¤çŠ¶æ€æ˜¯æ‰“å¼€çš„ã€‚å½“å®ƒçš„æ ·å­ä¸å…¶å®ƒå›¾æ ‡ç±»ä¼¼ï¼Œæ²¡æœ‰èƒŒæ™¯é¢œè‰²æ—¶ï¼Œè¡¨ç¤ºæ˜¯å¼€å¯çš„ï¼Œæ­¤æ—¶å½“ä½ ç¼–è¾‘ä»£ç æ–‡ä»¶çš„æ—¶å€™ï¼ŒCopilotä¼šè‡ªåŠ¨æç¤ºä»£ç å»ºè®®ã€‚å½“å®ƒæœ‰èƒŒæ™¯é¢œè‰²ï¼ˆçº¢è‰²ã€æ·±é»„è‰²ç­‰ï¼‰æ—¶ï¼Œè¡¨ç¤ºæ˜¯å…³é—­çš„ã€‚å¦‚æœè¦åˆ‡æ¢çŠ¶æ€åªè¦ç‚¹å‡»å®ƒï¼Œç„¶åé€‰æ‹©å…¨å±€ï¼ˆGloballyï¼‰å³å¯ã€‚\n\nå¿«æ·é”®\næ¥å—å»ºè®®ï¼šTab\næ‹’ç»å»ºè®®ï¼šEsc\næ‰“å¼€Copilotï¼šCtrl + Enter ï¼ˆä¼šæ‰“å¼€ä¸€ä¸ªå•ç‹¬çš„é¢æ¿ï¼Œå±•ç¤º10ä¸ªå»ºè®®ï¼‰\nä¸‹ä¸€æ¡å»ºè®®ï¼šCommand + ]\nä¸Šä¸€æ¡å»ºè®®ï¼šCommand + [\nè§¦å‘è¡Œå†…Copilotï¼šCommand + \\ ï¼ˆCoplitè¿˜æ²¡æœ‰ç»™å‡ºå»ºè®®æˆ–è€…å»ºè®®è¢«æ‹’ç»äº†ï¼Œå¸Œæœ›æ‰‹å·¥è§¦å‘å®ƒæä¾›å»ºè®®ï¼‰\n\nä½¿ç”¨ç»éªŒå¯¹äºåŸºæœ¬çš„æ•°æ®æ“ä½œï¼Œä¾é æ³¨é‡ŠCopilotä¼šå¸®ä½ æå®š\nCopilot é€šè¿‡æˆ‘çš„ä¸Šä¸‹æ–‡ï¼ŒçŒœæµ‹å‡ºäº†æˆ‘æƒ³å¯¹å“ªä¸ªæ•°ç»„è¿›è¡Œæ“ä½œï¼Œæ‰¾å‡ºæˆ‘æƒ³è¦çš„ä¸œè¥¿åè¿˜å¸®æˆ‘æ¨è¿›äº†ç»“æœæ•°ç»„ä¸­\nè¿™æ¬¡ç”Ÿæˆçš„ä»£ç æˆ‘å®Œå…¨å¯ä»¥ç›´æ¥ç”¨ï¼Œä¸éœ€è¦ä»»ä½•æ”¹åŠ¨ï¼Œè‡³å°‘èŠ‚çœäº†3åˆ†é’Ÿçš„æ—¶é—´\nå¯¹äºä¸€äº›é€šç”¨çš„ç±»ï¼Œå¯ä»¥è®©Copilotå¸®ä½ ç›´æ¥ç”Ÿæˆ, åªéœ€è¦è¾“å…¥æ­£ç¡®çš„æ–‡ä»¶åå’Œç±»å\næ”¯æŒä»»ä½•è¯­è¨€,æ¡†æ¶Python\nTypescript\nTypescript in Vue\nReact\n\nCss\nç”šè‡³æ˜¯è¿‡æ—¶çš„Layui\nCopilotä¼šæ ¹æ®ä¸Šä¸‹æ–‡çŒœæµ‹ä½ æ¥ä¸‹æ¥éœ€è¦åšä»€ä¹ˆé¦–å…ˆåœ¨æŒ‰é’®æ ä¸­åŠ ä¸€ä¸ªæŒ‰é’®\n\nç„¶ååœ¨åŸæœ¬å¤„ç†é€»è¾‘ä¸­æŒ‰ä¸€ä¸‹å›è½¦\n\næœ‰äº†è¿™ä¹ˆå®Œç¾çš„æ¬ç –æœºå™¨ï¼Œå°±å¯ä»¥æŠŠæ›´å¤šçš„æ—¶é—´ç”¨åœ¨æ€è€ƒï¼Œæ¶æ„ä¸Šï¼Œä¸éœ€è¦å»æµªè´¹æ—¶é—´å†™è¿™ç§æ­»ä»£ç äº†\nè¿˜æ˜¯éœ€è¦ä¸æ–­æå‡è‡ªå·±ï¼Œéš¾å¾—æ˜¯æ€è·¯ï¼Œæ¶æ„ï¼Œä¸æ˜¯æ­»ä»£ç ï¼Œæ°¸è¿œä¸è¦åšè¿™ç§æ¯«æ— æŠ€æœ¯å«é‡çš„äº‹ï¼Œå¦åˆ™åœ¨ä¸­å›½è¿™æ ·çš„å¤§ç¯å¢ƒä¸‹ï¼Œè¿˜è½®ä¸åˆ°æœºå™¨ä»£æ›¿ä½ ï¼Œå°±å·²ç»è¢«æ„¿æ„æ‹¿æ›´å°‘é’±ï¼Œåšæ›´å¤šäº‹çš„äººç»™ä»£æ›¿äº†\n","categories":["Github"],"tags":["Copilot","Github"]},{"title":"Httpè¯·æ±‚æ–¹å¼","url":"/2022/04/12/Http%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/","content":"\nGETä»æœåŠ¡å™¨è·å–èµ„æº\n\nHEADHEADå’ŒGETç±»ä¼¼ï¼Œåªæ˜¯æœåŠ¡å™¨çš„å“åº”ä¸­åªè¿”å›å¤´éƒ¨ï¼ˆæ²¡æœ‰å®ä½“éƒ¨åˆ†ï¼‰ï¼›åœ¨ä¸è·å–èµ„æºæƒ…å†µä¸‹äº†è§£èµ„æºçš„çŠ¶å†µ\n\nPOSTåœ¨æœåŠ¡å™¨åˆ›å»ºèµ„æº\n\nPUTåœ¨æœåŠ¡å™¨ä¿®æ”¹èµ„æºï¼ŒåŒä¸€ä¸ªurlå¤šæ¬¡è¯·æ±‚åªä¿®æ”¹ä¸€æ¬¡\n\nDELETEåœ¨æœåŠ¡å™¨åˆ é™¤èµ„æºï¼ŒåŒä¸€ä¸ªurlå¤šæ¬¡è¯·æ±‚åªåˆ é™¤ä¸€æ¬¡\n\nOPTIONSè·¨åŸŸæ—¶å¤æ‚è¯·æ±‚\n\nä½¿ç”¨äº† put&#x2F;delete&#x2F;connnect&#x2F;trace&#x2F;patch\näººä¸ºè®¾ç½®äº†ä¸€äº›headerå­—æ®µ\ncontent-typeçš„å€¼ä¸å±äºï¼šapplication&#x2F;x-www-form-urlencodedã€multipart&#x2F;form-dataã€text&#x2F;plain\n\n\nTRACE ç”¨äºæ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯å¤šæ•°ç½‘ç«™ä¸æ”¯æŒï¼Œä¼šæ³„éœ²ä¸€äº›è°ƒè¯•ä¿¡æ¯æˆ–è€…åªæœ‰å†…éƒ¨çš„æ—¶å€™æ‰æ”¯æŒï¼Œå®ƒèƒ½å¸®åŠ©ä½ è¿½è¿°æ•´ä¸ªhttpçš„é“¾è·¯ï¼Œå‡å¦‚httpå‘å‡ºå»ï¼Œå®ƒå¯èƒ½æ¥æ”¶ç¬¬ä¸€ä¸ªä¸æ˜¯ç½‘å…³ï¼› å®ƒå¯èƒ½æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œå†é€šè¿‡è´Ÿè½½å‡è¡¡æ‰åˆ°è¾¾ä½ çœŸå®çš„æœåŠ¡å™¨ï¼Œè¿™é‡Œé¢æœ‰ä¸€å®šçš„è·¯å¾„ï¼Œtraceå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯·æ±‚httpåè®®çš„ç½‘å€æ—¶åè®®è°ƒè¯•ä¿¡æ¯\n\nCONNECTä»£ç†\n\nPATCHå¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†æ›´æ–°\n\n\n","categories":["ç½‘ç»œåè®®"],"tags":["HTTP"]},{"title":"Personal Opinion About \"Check in\" Form","url":"/2022/04/14/Personal-Opinion-About-Check-in-Form/","content":"  Iâ€™ve seen too many people record their learning, working or gym, etc. which they intend to persist in it on WeChat Moments, But I hardly see any of them still keeping it when one week passes or earlier.  *IMO, It seems more like a sort of ritual for them than their initial purpose; It will be redundant and waste time for people who actually want to become better; Honestly, it really needs extremely determination to keep firm until we achieve succeed\n","categories":["English"],"tags":["English"]},{"title":"Python Cloudscraper Requestè¯·æ±‚HTMLè¿‡CloudFlareæ£€æµ‹","url":"/2022/04/21/Python-Cloudscraper-Request%E8%AF%B7%E6%B1%82HTML%E8%BF%87CloudFlare%E6%A3%80%E6%B5%8B/","content":"Python Cloudscraper Requestè¯·æ±‚HTMLè¿‡CloudFlareæ£€æµ‹ä¸Šä¸€ç¯‡ä½¿ç”¨æ— å¤´æµè§ˆå™¨ï¼Œåœ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæ—¶é‡åˆ°äº†éš¾é¢˜â€“ç”±äºæœåŠ¡å™¨é…ç½®è¿‡ä½ï¼Œä½†æ— å¤´æµè§ˆå™¨çš„webdriver cpuå ç”¨ç•¥é«˜ï¼ŒåŒçº¿ç¨‹å¼€ä¸¤ä¸ªcpuå°±åƒæ»¡äº†ï¼Œæ‰€ä»¥æ‰“ç®—æ¢ä¸€ç§æ€è·¯ï¼Œä½¿ç”¨ç›´æ¥requestè¯·æ±‚\nåˆšå‡†å¤‡å†™è¿™ä¸ªçˆ¬è™«æ—¶ï¼Œæœ¬æ˜¯æ‰“ç®—ç”¨requestè¯·æ±‚çˆ¬å–é™æ€èµ„æºè§£æçš„æ€è·¯åšçš„ï¼Œä½†å°è¯•åå‘ç°ä¼šè¢«CloudFlareç­‰å·¥å…·æ£€æµ‹å¹¶æ‹¦æˆª.\nç”¨äº†cloudscraperå‘é€è¯·æ±‚ï¼Œç°åœ¨å¯ä»¥è¿‡æ£€æµ‹äº†ï¼Œç›¸æ¯”äºæ— å¤´æµè§ˆå™¨ï¼Œæ›´åŠ èŠ‚çœèµ„æº\nä»£ç ï¼š\nimport cloudscraper    def cloudflare_get(self, url, proxies=None):        retry = 6        while retry &gt; 0:            try:                res = cloudscraper.create_scraper().get(url,                                                        proxies=proxies,                                                        timeout=20)                # print(res.text)                return res            # except cloudscraper.exceptions.CloudflareIUAMError:            except Exception as e:                print(f&#x27;cloudflare get failed on &#123;e&#125;, retrying&#x27;)                logging.error(&#x27;cloudflare get failed on %s&#x27;, e)                retry = retry - 1                time.sleep(5)                        raise Exception(f&#x27;cloudflare get &#123;url&#125; failed&#x27;)\n\næœªæ¥åšçˆ¬è™«æ—¶ï¼Œå¯¹äºä¸æ¶‰åŠå¤æ‚æ“ä½œçš„çˆ¬å–éœ€æ±‚ï¼Œä¸€å¾‹é‡‡å–é™æ€èµ„æºçˆ¬å–çš„æ–¹å¼ï¼Œå ç”¨èµ„æºå°ï¼Œæ•ˆç‡é«˜ã€‚æ— å¤´æµè§ˆå™¨é’ˆå¯¹äºå­˜åœ¨å¤æ‚æ“ä½œé€»è¾‘æ—¶æ‰éœ€è¦ä½¿ç”¨","categories":["Python"],"tags":["Python","Spider","CloudFlare","Cloudscraper"]},{"title":"Python selenium æ— å¤´æµè§ˆå™¨è¿‡CloudFlare","url":"/2022/04/21/Python-selenium-%E6%97%A0%E5%A4%B4%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%87CloudFlare/","content":"ä½¿ç”¨ undetected_chromedriver chromeé©±åŠ¨from selenium.webdriver.chrome.options import Optionsfrom selenium.webdriver.support.ui import WebDriverWaitfrom selenium.webdriver.support import expected_conditions as ECfrom selenium.webdriver.common.by import Byimport undetected_chromedriver as uc                          chrome_options = Options() chrome_options.add_argument(&#x27;--headless&#x27;)        # chrome_options.add_argument(        #     &#x27;user-agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36&quot;&#x27;        # )self.driver = uc.Chrome(chrome_options)        # æµ‹è¯•åå‘ç°ä½¿ç”¨Undetected Chromedrive ä¸éœ€è¦æ³¨å…¥js        # with open(&#x27;./stealth.min.js&#x27;) as f:        #     js = f.read()        # self.driver.execute_cdp_cmd(&quot;Page.addScriptToEvaluateOnNewDocument&quot;,        #                             &#123;&quot;source&quot;: js&#125;)\n\n","categories":["Python"],"tags":["Python","Spider"]},{"title":"TCP/IPä¸‰æ¬¡æ¡æ‰‹","url":"/2022/04/12/TCP-IP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/","content":"\n","categories":["ç½‘ç»œåè®®"],"tags":["TCP/IP"]},{"title":"mapä¸foreach","url":"/2021/11/11/map%E4%B8%8E-foreach/","content":"åŒºåˆ«ï¼ŸArray.forEach()æ”¹å˜åŸæ•°ç»„ï¼ŒArray.map()åˆ™ä¸æ”¹å˜åŸæ•°ç»„ï¼Œè¿”å›æ–°å¯¹è±¡ï¼Œä½†åœ¨å®è·µä¸­ï¼Œå‘ç°åªæœ‰åŸºç¡€æ•°æ®ç±»å‹ä¸ä¼šè¢«æ”¹å˜ï¼Œå¼•ç”¨æ•°æ®ç±»å‹åˆ™è¿˜æ˜¯ä¼šè¢«æ”¹å˜ã€‚\nä¾‹:\nlet a = [1,2,3,4,5]a.map(n =&gt; &#123;  n = n * 2&#125;)console.log(a) // [1, 2, 3, 4, 5]let b = [&#123; a: 1 &#125;, &#123; a: 2 &#125;, &#123; a: 3 &#125;, &#123; a: 4 &#125;, &#123; a: 5 &#125;]b.map((v) =&gt; &#123;  v.a = v.a * 2&#125;)console.log(JSON.stringify(b)) // [&#123;&quot;a&quot;:2&#125;,&#123;&quot;a&quot;:4&#125;,&#123;&quot;a&quot;:6&#125;,&#123;&quot;a&quot;:8&#125;,&#123;&quot;a&quot;:10&#125;]\n\nä»¥ä¸‹å†…å®¹æ‘˜å–CSDNmap():mapæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ºåŸå§‹æ•°ç»„è°ƒç”¨å‡½æ•°å¤„ç†åçš„å€¼\nä¹Ÿå°±æ˜¯map()è¿›è¡Œå¤„ç†ä¹‹åè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„\nâš ï¸æ³¨æ„ï¼šmap()æ–¹æ³•ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹\nmapæ–¹æ³•ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„\nforEach()\nforEachæ–¹æ³•ç”¨äºè°ƒç”¨æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†å…ƒç´ ä¼ ç»™å›è°ƒå‡½æ•°\nâš ï¸æ³¨æ„ï¼š forEachå¯¹äºç©ºæ•°ç»„æ˜¯ä¸ä¼šè°ƒç”¨å›è°ƒå‡½æ•°çš„ ï¼Œ\næ²¡æœ‰è¿”å›ä¸€ä¸ªæ–°æ•°ç»„&amp;æ²¡æœ‰è¿”å›å€¼\nåº”ç”¨åœºæ™¯ï¼šä¸ºä¸€äº›ç›¸åŒçš„å…ƒç´ ï¼Œç»‘å®šäº‹ä»¶å¤„ç†å™¨ï¼\nä¸å¯é“¾å¼è°ƒç”¨\næ‰§è¡Œé€Ÿåº¦æ‘˜è‡ªCSDNjsPrefæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç½‘ç«™ç”¨æ¥æ¯”è¾ƒä¸åŒçš„JavaScriptå‡½æ•°çš„æ‰§è¡Œé€Ÿåº¦ã€‚\nè¿™é‡Œæ˜¯forEach()å’Œmap()çš„æµ‹è¯•ç»“æœï¼š\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æˆ‘åˆ°ç”µè„‘ä¸ŠforEach()çš„æ‰§è¡Œé€Ÿåº¦æ¯”map()æ…¢äº†70%ã€‚æ¯ä¸ªäººçš„æµè§ˆå™¨çš„æ‰§è¡Œç»“æœä¼šä¸ä¸€æ ·ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥æ¥æµ‹è¯•ä¸€ä¸‹: Map vs. forEach - jsPrefã€‚\nJavaScriptå¤ªçµæ´»äº†ï¼Œå‡ºäº†BUGä½ ä¹Ÿä¸çŸ¥é“ï¼Œä¸å¦¨æ¥å…¥Fundebugçº¿ä¸Šå®æ—¶ç›‘æ§ã€‚\nå‡½æ•°å¼è§’åº¦çš„ç†è§£\nå¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨å‡½æ•°æ˜¯ç¼–ç¨‹ï¼Œé‚£ä¹ˆè‚¯å®šå–œæ¬¢ä½¿ç”¨map()ã€‚å› ä¸ºforEach()ä¼šæ”¹å˜åŸå§‹çš„æ•°ç»„çš„å€¼ï¼Œè€Œmap()ä¼šè¿”å›ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ï¼ŒåŸæœ¬çš„æ•°ç»„ä¸å—åˆ°å½±å“ã€‚\nå“ªä¸ªæ›´å¥½å‘¢ï¼Ÿ\nå–å†³äºä½ æƒ³è¦åšä»€ä¹ˆã€‚\nforEaché€‚åˆäºä½ å¹¶ä¸æ‰“ç®—æ”¹å˜æ•°æ®çš„æ—¶å€™ï¼Œè€Œåªæ˜¯æƒ³ç”¨æ•°æ®åšä¸€äº›äº‹æƒ… â€“ æ¯”å¦‚å­˜å…¥æ•°æ®åº“æˆ–åˆ™æ‰“å°å‡ºæ¥ã€‚\nç†è§£mapæ€§èƒ½å¼ºäºforEachï¼Œä¸”èƒ½é“¾å¼æ“ä½œï¼ŒforEaché€‚åˆä¸æ”¹å˜æ•°æ®ï¼Œåªæƒ³æ‹¿æ•°æ®åšä¸€äº›åˆ¤æ–­æ—¶å¯¹æ•°æ®åšæ“ä½œä¼˜å…ˆç”¨map\n","categories":["Javascript"],"tags":["VanillaJs","Map","Foreach"]},{"title":"ç»ˆç«¯å¸¸ç”¨å‘½ä»¤","url":"/2022/03/29/%E7%BB%88%E7%AB%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","content":"æŸ¥çœ‹ç¨‹åºè¿›ç¨‹IDps -ef | grep [Process Name]\n\næŸ¥çœ‹ç›‘å¬è¯¥ç«¯å£çš„è¿›ç¨‹sudo lsof -nP | grep LISTEN | grep [Port]# orsudo lsof -i :[Port]\n\næŸ¥çœ‹è¯¥è¿›ç¨‹å ç”¨çš„ç«¯å£sudo lsof -nP -p [Process ID] | grep LISTEN\n\næ€æ­»è¿›ç¨‹kill -9 [Process ID]\n\n","categories":["Linux"],"tags":["Linux","Shell"]},{"title":"ç»™è‡ªå·±æ­å»ºä¸€ä¸ªnodeè„šæ‰‹æ¶å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®","url":"/2022/06/20/%E7%BB%99%E8%87%AA%E5%B7%B1%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAnode%E8%84%9A%E6%89%8B%E6%9E%B6%E5%BF%AB%E9%80%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE/","content":"æœ€è¿‘åšçš„å°å‹é¡¹ç›®æ¯”è¾ƒå¤šï¼Œä¸ºäº†å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼ŒèŠ±ä¸€å°æ—¶è‡ªå·±å†™äº†ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œä¸‹æ¬¡å†éœ€è¦æ­å»ºç›¸åŒç±»å‹é¡¹ç›®æ—¶ï¼Œåªéœ€è¦ä»æ¨¡ç‰ˆé€‰æ‹©å°±å¯ä»¥å¿«é€Ÿå¯åŠ¨è„šæ‰‹æ¶æ‰€ç”¨åˆ°çš„ä¾èµ–\nchalk\ncommander  GitHub - tj&#x2F;commander.js: node.js command-line interfaces made easy\ndownload-git-repo\ninquirer  GitHub - SBoudrias&#x2F;Inquirer.js: A collection of common interactive command line user interfaces.\nora  GitHub - sindresorhus&#x2F;ora: Elegant terminal spinner\n\nStep1å¼•å…¥commanderï¼Œå¹¶ä¸”åˆ›å»ºæ§åˆ¶å°æŒ‡ä»¤program  .version(    require(&quot;./package.json&quot;).version,    &quot;-v, --version&quot;,    &quot;output the current version&quot;  )  .command(&quot;create&quot;)  .descrip(tion(&quot;create a new project&quot;)\t.action(()=&gt; &#123;  // Do something after receive command&#125;)  // ...program.parse();\n\nStep2ä½¿ç”¨inquirerå‘èµ·äº¤äº’// ...initialize commander.action(() =&gt; &#123;    inquirer      .prompt([        &#123;          type: &quot;input&quot;,          name: &quot;name&quot;,          default: &quot;my-project&quot;,          message: &quot;ğŸ§ Pleace input your project name&quot;,        &#125;,        &#123;          type: &quot;list&quot;,          name: &quot;type&quot;,          message: &quot;ğŸ§ What type of project do you want to create?&quot;,          // list ç±»å‹éœ€è¦å¡«å…¥é€‰é¡¹          choices: [            &#123;              value: 1,              name: &quot;ğŸ‘‰ Vue 3 + Typescript + Webpack 5 + Vant 3 + TailwindCss)&quot;,            &#125;,          ],        &#125;,      ])\n\nStep3å¯¹è¿”å›çš„æ‰€é€‰é¡¹åšç›¸åº”çš„å¤„ç†// ...const gitRepoMap = &#123;  1: &quot;direct:https://github.com/swaggyp7/TemplateForVue3Mobile.git&quot;,&#125;;.then((answers) =&gt; &#123;        const &#123; name, type &#125; = answers;  \t\t\t// å¯åŠ¨è¿›åº¦åé¦ˆ        const proce = ora(&quot;Downloading template...&quot;);        proce.start();  \t\t\t// ä½¿ç”¨download-git-repoå…‹éš†gitæ¨¡ç‰ˆä»“åº“åˆ°æœ¬åœ°\t\t\t\t// è¿™é‡Œçš„gitä»“åº“å¿…é¡»æ˜¯è¿™æ ·çš„æ ¼å¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š  \t\t\t// direct:https://github.com/username/repository.git        download(gitRepoMap[type], name, &#123; clone: true &#125;, (err) =&gt; &#123;          if (err) &#123;            proce.fail(chalk.red(err));          &#125; else &#123;            proce.succeed(              chalk.greenBright(                &quot;ğŸŒŸ Congratulation! Project created successfully!&quot;              )            );            // è¿™é‡Œå¯ä»¥å»æŠŠpackage.jsonä¸­çš„package nameæ”¹ä¸ºåˆšåˆšå¡«å…¥çš„package name            console.log(chalk.blue(chalk.bold(&quot;cd ./&quot; + name)));            console.log(chalk.blue(chalk.bold(&quot;yarn install&quot;)));            console.log(chalk.blue(chalk.bold(&quot;yarn serve&quot;)));          &#125;        &#125;);      &#125;);\n\n","categories":["NodeJs"],"tags":["NodeJs","Command","CLi"]},{"title":"é—­åŒ…çš„ç†è§£","url":"/2021/10/21/%E9%97%AD%E5%8C%85/","content":"é—®é¢˜function fun(n,o) &#123;  console.log(o)  return &#123;    fun:function(m)&#123;      return fun(m,n);    &#125;  &#125;;&#125;var a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);//undefined,?,?,?var b = fun(0).fun(1).fun(2).fun(3);//undefined,?,?,?var c = fun(0).fun(1);  c.fun(2);  c.fun(3);//undefined,?,?,?//é—®:ä¸‰è¡Œa,b,cçš„è¾“å‡ºåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè§£æç¬¬ä¸€è¡Œvar a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);//undefined,?,?,?\n\nåˆ†æï¼šé¦–å…ˆï¼Œè¿™ä¸€è¡Œä»£ç ä¸ºâ€œ;â€åˆ†å‰²ï¼Œæ‰€ä»¥ï¼Œvar aä¸€æ—¦å®šä¹‰ï¼Œåç»­è°ƒç”¨funæ–¹æ³•ä¸ä¼šåœ¨æ”¹å˜æœ¬èº«ï¼Œm,nçš„ä½œç”¨åŸŸä¹Ÿå±äºaï¼Œæ‰€ä»¥fun(0) &#x3D;&gt; undefined, æ­¤æ—¶çš„aå®é™…ä¸ºï¼š\nvar a = function fun(n,0) &#123;  console.log(0)  return &#123;    fun:function(m)&#123;      return fun(m,n);    &#125;  &#125;;&#125;\n\næ‰€ä»¥ä¸ç®¡æ˜¯a.fun(x),è¾“å‡ºçš„å€¼éƒ½æ˜¯0\nç¬¬äºŒè¡Œvar b = fun(0).fun(1).fun(2).fun(3);//undefined,?,?,?\n\nåˆ†æï¼šè¿™ä¸€è¡Œä¸ºè¿ç»­æ‰§è¡Œï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡æ‰çš„funéƒ½ä¸ºä¸Šæ¬¡æ‰§è¡Œè¿”å›çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯\n&#123;  fun: (m) &#123;    return fun(m,n)  &#125;&#125;\n\nå…¶nçš„ä½œç”¨åŸŸæ€»ä¸ºä¸Šä¸€æ¬¡è°ƒç”¨æ­¤æ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ï¼Œç­”æ¡ˆä¸ºï¼š\n// undefined,0,1,2\n\nç¬¬ä¸‰è¡Œvar c = fun(0).fun(1);  c.fun(2);  c.fun(3);//undefined,?,?,?\n\nç¬¬ä¸‰è¡Œæ‡’å¾—è¯´äº†ï¼Œä¸€æ ·çš„é“ç†\n","categories":["Javascript"],"tags":["VanillaJs"]},{"title":"Nodejs Koa æ¥å…¥Mysql+ä¸ƒç‰›äº‘","url":"/2022/06/27/Nodejs-Koa-%E6%8E%A5%E5%85%A5Mysql-%E4%B8%83%E7%89%9B%E4%BA%91/","content":"Nodejs Koa æ¥å…¥Mysql+ä¸ƒç‰›äº‘ç«™ç‚¹åœ°å€: https://tmx.freesty1e.cnæœ€è¿‘åšäº†ä¸€ä¸ªWebç”»å»Šåº”ç”¨ï¼Œç”¨äºç»™å¥³æœ‹å‹å±•ç¤ºä½œå“é›†ï¼Œåç«¯æœåŠ¡ç”¨åˆ°äº†Koa+mysqlæ¥å…¥ä¸ƒç‰›äº‘å­˜å‚¨é™æ€å›¾ç‰‡ï¼Œè®°å½•ä¸€ä¸‹æ–¹ä¾¿ä¸‹æ¬¡æŠ„è¿æ¥Mysqlæ‰€ç”¨åˆ°çš„NPMä¾èµ–mysqltypeorm(å°†Typescriptå®ä½“æ¨¡å‹æ˜ å°„åˆ°æ•°æ®åº“)reflect-metadata(Typeormæ‰€éœ€ä¾èµ–)\n\nStep1åˆ›å»ºormconfig.jsonï¼Œé…ç½®æ•°æ®åº“\n&#123;  &quot;type&quot;: &quot;mysql&quot;,  &quot;host&quot;: &quot;localhost&quot;,  &quot;port&quot;: 3306,  &quot;username&quot;: &quot;any&quot;,  &quot;password&quot;: &quot;***&quot;,  &quot;database&quot;: &quot;any&quot;,  &quot;synchronize&quot;: true, // æ˜¯å¦è‡ªåŠ¨å°†å®ä½“æ¨¡å‹åŒæ­¥åˆ°æ•°æ®åº“  &quot;entities&quot;: [&quot;src/entity/*.ts&quot;], // å®ä½“æ¨¡å‹å­˜æ”¾ä½ç½®  &quot;cli&quot;: &#123;    &quot;entitiesDir&quot;: &quot;src/entity&quot;  &#125;&#125;\n\nStep2åœ¨ç¨‹åºå…¥å£å¼•å…¥ reflect-metadataï¼Œå¹¶ä¸”åœ¨åˆ›å»ºKoaå®ä¾‹å‰å»ºç«‹Mysqlè¿æ¥\nimport &quot;reflect-metadata&quot;;import &#123; createConnection &#125; from &quot;typeorm&quot;;createConnection().then(()=&gt;&#123;  const app = new Koa();    // app.use(xxx)...     app.listen(3000);&#125;).catch((err: string) =&gt; console.log(&quot;Connection error&quot;, err));\n\nStep3åœ¨ä¹‹å‰é…ç½®çš„å®ä½“æ¨¡å‹ç›®å½•ä¸‹åˆ›å»ºå®ä½“æ¨¡å‹\nimport &#123; Entity, Column, PrimaryGeneratedColumn &#125; from &quot;typeorm&quot;;@Entity()export class Gallery &#123;  @PrimaryGeneratedColumn() // è‡ªå¢ä¸»é”®  id: number;  @Column()  title: string;  @Column(&#123; length: 500 &#125;) // æ³¨è§£å¯ä»¥ä¼ å…¥é…ç½®å‚æ•°  srcs: string;  @Column()  row: number;  @Column()  col: number;  @Column()  avatar: string;&#125;\n\nStep4é…ç½®å®Œæˆåå†è¿æ¥æ•°æ®åº“ï¼Œä¼šè‡ªåŠ¨åŒæ­¥å®ä½“æ¨¡å‹åˆ°æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”è¡¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º\n![image-20220627100312355](&#x2F;Users&#x2F;lin&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220627100312355.png)\nCRUDä»£ç  (è¿™é‡Œç”¨äº†bodyParser è§£æå‚æ•°)\nimport &#123; Context &#125; from &quot;koa&quot;;import &#123; Gallery &#125; from &quot;../entity/gallery&quot;;import &#123; getManager &#125; from &quot;typeorm&quot;;import CommeResponse from &quot;../entity/Response&quot;;import &#123; requireParams &#125; from &quot;../tools&quot;;export default class GalleryController &#123;  public static async list(ctx: Context) &#123;    const res = new CommeResponse();    const repository = getManager().getRepository(Gallery);    const gallerys = await repository.find();    res.data = gallerys;    res.msg = &quot;æˆåŠŸ&quot;;    res.success = true;    ctx.status = res.code = 200;    ctx.body = res;  &#125;  public static async detail(ctx: Context) &#123;    const res = new CommeResponse();    const &#123; id &#125; = requireParams(&quot;id&quot;, ctx.request.body);    const galleryRepository = getManager().getRepository(Gallery);    const gallery = await galleryRepository.findOne(&#123; where: &#123; id &#125; &#125;);    if (gallery) &#123;      ctx.status = res.code = 200;      res.success = true;      res.msg = &quot;æˆåŠŸ&quot;;      res.data = gallery;      ctx.body = res;    &#125; else &#123;      throw new Error(&quot;è·å–è¯¦æƒ…å¤±è´¥&quot;);    &#125;  &#125;  public static async add(ctx: Context) &#123;    const res = new CommeResponse();    const &#123; title, srcs, col, row, avatar &#125; = requireParams(      &quot;title,srcs&quot;,      ctx.request.body    );    const galleryRepository = getManager().getRepository(Gallery);    const gallery = new Gallery();    gallery.title = title;    gallery.srcs = srcs;    gallery.avatar = avatar ?? srcs.split(&quot;,&quot;)[0];    gallery.row = row ?? 1;    gallery.col = col ?? 1;    const sqlRes = await galleryRepository.insert(gallery);    if (sqlRes) &#123;      ctx.status = res.code = 200;      res.success = true;      res.msg = &quot;æ–°å¢æˆåŠŸ&quot;;      ctx.body = res;    &#125; else &#123;      throw new Error(&quot;æ–°å¢å¤±è´¥&quot;);    &#125;  &#125;  public static async delete(ctx: Context) &#123;    const res = new CommeResponse();    const &#123; id &#125; = requireParams(&quot;id&quot;, ctx.request.body);    const galleryRepository = getManager().getRepository(Gallery);    await galleryRepository.delete(id);    res.success = true;    res.msg = &quot;åˆ é™¤æˆåŠŸ&quot;;    ctx.status = res.code = 200;    ctx.body = res;  &#125;&#125;\n\næ¥å…¥ä¸ƒç‰›äº‘Step1å®‰è£…ä¸ƒç‰›äº‘node SDK\nyarn add qiniu-sdk// npm install qiniu-sdk -S\n\nStep2åˆ›å»ºé…ç½®æ–‡ä»¶é…ç½®ä¸ƒç‰›äº‘å¯†é’¥ï¼Œåœ°å€\n// qiniu.json&#123;  &quot;accessKey&quot;: &quot;qcBPTKEQ-lRlS----------------------------&quot;,  &quot;secretKey&quot;: &quot;2JTyex6hA7Sw-----------------------------&quot;,  &quot;baseUrl&quot;: &quot;Host&quot;&#125;\n\nStep3è·å–ä¸ƒç‰›äº‘Token\nimport qiniu from &quot;qiniu&quot;;import &#123; baseUrl, secretKey, accessKey &#125; from &quot;../../qiniu.json&quot;;private static qiniuToken() &#123;    const mac = new qiniu.auth.digest.Mac(accessKey, secretKey);    const options = &#123;      scope: &quot;Your scope name&quot;,      expires: 3600 * 24, // file erpire time    &#125;;    const putPolicy = new qiniu.rs.PutPolicy(options);    const uploadToken = putPolicy.uploadToken(mac);    return uploadToken;  &#125;\n\nStep4å°è£…ä¸Šä¼ å‡½æ•°\nimport qiniu from &quot;qiniu&quot;;// Keyæ–‡ä»¶åï¼Œlocalfile æœ¬åœ°æ–‡ä»¶è·¯å¾„// æ³¨ï¼š å¦‚æœæƒ³ä¼ åˆ°å¯¹åº”æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥åœ¨æ–‡ä»¶åå‰åŠ  dirName/private static qiniuUpload(key: string, localFile: string) &#123;    const uploadToken = FileController.qiniuToken();    const config: any = new qiniu.conf.Config();    // å­˜å‚¨åœ°åŒºç¼–å·æŸ¥è¯¢ï¼š https://developer.qiniu.com/kodo/1671/region-endpoint-fq    config.zone = qiniu.zone.Zone_z2;    const formUploader = new qiniu.form_up.FormUploader(config);    const putExtra = new qiniu.form_up.PutExtra();    return new Promise((resolve, reject) =&gt; &#123;      formUploader.putFile(        uploadToken,        key,        localFile,        putExtra,        (respErr, respBody, respInfo) =&gt; &#123;          if (respErr) &#123;            reject(respErr);          &#125; else &#123;            resolve(respBody);          &#125;        &#125;      );    &#125;);  &#125;\n\nStep5æœ€åå°è£…ä¸Šä¼ APIæš´éœ²å‡ºå»\n/** * ä¸Šä¼ æ–‡ä»¶ * @param ctx */public static async upload(ctx: Context) &#123;  const response = new CommeResponse();  const &#123; file &#125; = ctx.request.files as any;  if (!file) &#123;    throw new Error(&quot;è¯·é€‰æ‹©æ–‡ä»¶ï¼&quot;);  &#125; else if (Array.isArray(file)) &#123;    throw new Error(&quot;åªæ”¯æŒå•ä¸ªæ–‡ä»¶ï¼&quot;);  &#125;  const ext = extname(file.originalFilename);  const fileName = &quot;gallery/&quot; + +new Date() + ext;  const localFile = file.filepath;  try &#123;    const res: any = await FileController.qiniuUpload(fileName, localFile);    const url = baseUrl + res.key;    response.success = true;    response.msg = &quot;ä¸Šä¼ æˆåŠŸ&quot;;    response.data = &#123;      url,    &#125;;    ctx.body = response;  &#125; catch (e) &#123;    throw new Error(&quot;ä¸Šä¼ å›¾ç‰‡å¤±è´¥&quot;);  &#125;&#125;\n\né¡ºå¸¦è®°å½•ä¸€ä¸‹è¿™é‡Œç”¨åˆ°çš„å…¨å±€å¼‚å¸¸æ•è·ä¸­é—´ä»¶import &#123; Context &#125; from &quot;vm&quot;;import CommeResponse from &quot;./entity/Response&quot;;export default function errorHandler() &#123;  return async (ctx: Context, next: Function) =&gt; &#123;    try &#123;      await next();    &#125; catch (error) &#123;      // æ•è·åˆ°å¼‚å¸¸åè‡ªåŠ¨è¿”å›é€šç”¨æ•°æ®æ ¼å¼      const res = new CommeResponse();      res.code = 500;      res.msg = error.message;      ctx.body = res;    &#125;  &#125;;&#125;","categories":["Nodejs"],"tags":["Mysql","Nodejs","Koa","ä¸ƒç‰›äº‘"]}]